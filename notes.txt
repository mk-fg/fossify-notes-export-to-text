# for emacs conf-mode - (modify-syntax-entry ?\' "w")

android-sdk.sh:
	# Uses android-studio install/setup here, and VMs from it for testing
	export ANDROID_HOME=/home/adev/Android/Sdk
	export PATH="$PATH:$ANDROID_HOME/tools/bin/"
	export PATH="$PATH:$ANDROID_HOME/platform-tools/"
	export PATH="$PATH:$ANDROID_HOME/cmdline-tools/latest/bin"
	export PATH="$PATH:$ANDROID_HOME/emulator"
	# From File->Other Settings->Default Project Structure/JDK in Studio
	export JAVA_HOME=/opt/android-studio/jbr
	export PS1=" #aenv$PS1"
	cd ~/FossifyNotesToText

create app template:
	# pacman -S npm
	# source android-sdk.sh
	npx @react-native-community/cli init FossifyNotesToText

emulator in X11 from android-studio:
	# source android-sdk.sh
	emulator -list-avds
	emulator -avd Nexus_One_API_30
	adb devices -l
	adb get-state

run the app on emulated phone:
	# source android-sdk.sh
	npm install
	npm run start
	# "npm run link" runs react-native-asset dependency to include fonts
	npm run link
	npm run android
	# does "cd android && ./gradlew build" + uploads/reloads apk in "run start" server process
	# see package.json for all these action commands

build release apk:
	# still 47M in size, vs 110M debug build, so kinda terrible anyway
	# ./android/app/build/outputs/apk/debug/app-debug.apk
	# source android-sdk.sh
	cd android && ./gradlew assembleRelease
	adb install app/build/outputs/apk/release/app-release.apk
	cp _dst/android/app/build/outputs/apk/release/app-release.apk _tmp/




#####
